(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-537f5b58"],{3479:function(e,t,l){"use strict";var a=l("519e"),o=l.n(a);o.a},"519e":function(e,t,l){},"8fd0":function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"app-container"},[l("el-form",{ref:"form",attrs:{rules:e.rules,inline:!0,model:e.searchForm,"label-width":"120px"}},[l("el-form-item",{attrs:{label:"姓名：",prop:"name"}},[l("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.goSearch(e.searchForm)}},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"电话：",prop:"phone"}},[l("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.goSearch(e.searchForm)}},model:{value:e.searchForm.phone,callback:function(t){e.$set(e.searchForm,"phone",t)},expression:"searchForm.phone"}})],1),e._v(" "),l("el-form-item",[l("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:e.goSearch}},[e._v("查询")])],1)],1),e._v(" "),l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",stripe:"",fit:"","highlight-current-row":"","header-row-class-name":"tabel-header"}},[l("el-table-column",{attrs:{align:"center",label:"姓名",prop:"name",width:"95"}}),e._v(" "),l("el-table-column",{attrs:{align:"center",label:"课程",prop:"course",width:"110"}}),e._v(" "),l("el-table-column",{attrs:{align:"center",label:"电话",prop:"phone",width:"160"}}),e._v(" "),l("el-table-column",{attrs:{align:"center",label:"年龄",prop:"age",width:"95"}}),e._v(" "),l("el-table-column",{attrs:{label:"性别",width:"95",prop:"sex",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s("M"===t.row.sex?"男":"女")+"\n      ")]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"家长姓名",width:"95",prop:"parentsName",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{label:"家长电话",width:"160",prop:"parentsPhone",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{label:"状态",width:"110",prop:"status",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("status")(t.row.status))+"\n      ")]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"留言",prop:"message",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{label:"报名时间",prop:"createTime",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.createTime)+"\n      ")]}}])}),e._v(" "),l("el-table-column",{attrs:{align:"center",prop:"created_at",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(l){return e.handleDetail(t.$index,t.row)}}},[e._v("详情")]),e._v(" "),l("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(l){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")])]}}])})],1),e._v(" "),l("el-dialog",{attrs:{itle:e.showDetail?"详情":"编辑",visible:e.dialogFlag,width:"40%"},on:{"update:visible":function(t){e.dialogFlag=t}}},[l("el-form",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,"label-width":"120px",disabled:e.showDetail,inline:""}},[l("el-form-item",{attrs:{label:"姓名"}},[l("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"年龄"}},[l("el-input",{model:{value:e.form.age,callback:function(t){e.$set(e.form,"age",t)},expression:"form.age"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"性别"}},[l("el-select",{attrs:{placeholder:"请选择性别"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[l("el-option",{attrs:{label:"男",value:"M"}}),e._v(" "),l("el-option",{attrs:{label:"女",value:"F"}})],1)],1),e._v(" "),l("el-form-item",{attrs:{label:"课程"}},[l("el-select",{attrs:{placeholder:"请选择性别"},model:{value:e.form.course,callback:function(t){e.$set(e.form,"course",t)},expression:"form.course"}},[l("el-option",{attrs:{label:"少儿民族",value:"1"}}),e._v(" "),l("el-option",{attrs:{label:"现代舞",value:"2"}}),e._v(" "),l("el-option",{attrs:{label:"New Jazz",value:"3"}}),e._v(" "),l("el-option",{attrs:{label:"Popping",value:"4"}}),e._v(" "),l("el-option",{attrs:{label:"Breaking",value:"5"}}),e._v(" "),l("el-option",{attrs:{label:"Locking",value:"6"}}),e._v(" "),l("el-option",{attrs:{label:"House",value:"7"}})],1)],1),e._v(" "),l("el-form-item",{attrs:{label:"学校"}},[l("el-input",{staticStyle:{width:"534px"},model:{value:e.form.school,callback:function(t){e.$set(e.form,"school",t)},expression:"form.school"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"报名电话"}},[l("el-input",{model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"家长姓名"}},[l("el-input",{model:{value:e.form.parentsName,callback:function(t){e.$set(e.form,"parentsName",t)},expression:"form.parentsName"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"与报名人关系"}},[l("el-select",{attrs:{placeholder:"请选择课程"},model:{value:e.form.course,callback:function(t){e.$set(e.form,"course",t)},expression:"form.course"}},[l("el-option",{attrs:{label:"父母",value:"父母"}}),e._v(" "),l("el-option",{attrs:{label:"同学",value:"同学"}}),e._v(" "),l("el-option",{attrs:{label:"朋友",value:"朋友"}}),e._v(" "),l("el-option",{attrs:{label:"同事",value:"同事"}}),e._v(" "),l("el-option",{attrs:{label:"其他",value:"其他"}})],1)],1),e._v(" "),l("el-form-item",{attrs:{label:"家长电话"}},[l("el-input",{model:{value:e.form.parentsPhone,callback:function(t){e.$set(e.form,"parentsPhone",t)},expression:"form.parentsPhone"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"邮箱"}},[l("el-input",{model:{value:e.form.mail,callback:function(t){e.$set(e.form,"mail",t)},expression:"form.mail"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"地址"}},[l("el-input",{model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"留言"}},[l("el-input",{staticStyle:{width:"534px"},attrs:{type:"textarea"},model:{value:e.form.message,callback:function(t){e.$set(e.form,"message",t)},expression:"form.message"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"报名时间"}},[l("el-input",{attrs:{disabled:""},model:{value:e.form.createTime,callback:function(t){e.$set(e.form,"createTime",t)},expression:"form.createTime"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"状态",prop:"status"}},[l("el-select",{attrs:{placeholder:"请选择状态"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[l("el-option",{attrs:{label:"待沟通",value:"0"}}),e._v(" "),l("el-option",{attrs:{label:"已分班",value:"1"}}),e._v(" "),l("el-option",{attrs:{label:"待跟进",value:"1"}})],1)],1),e._v(" "),l("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.showEdit,expression:"showEdit"}],attrs:{label:"处理备注",prop:"desc"}},[l("el-input",{staticStyle:{width:"534px"},attrs:{type:"textarea"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1)],1),e._v(" "),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.dialogFlag=!1}}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:e.changeApply}},[e._v("确 定")])],1)],1)],1)},o=[],r=l("b775");function n(e){return Object(r["a"])({url:"/apply/queryApply",method:"POST",data:e})}function s(e){return Object(r["a"])({url:"/apply/updateApply",method:"POST",data:e})}var i={filters:{status:function(e){switch(e){case"0":return"待沟通";case"1":return"已报名";default:return e}}},data:function(){var e=function(e,t,l){"1"===t||"2"===t?l():l(new Error("请更改报名表状态"))},t=function(e,t,l){/^(?:[\u4e00-\u9fa5·]{2,16})$/.test(t)||""===t?l():l(new Error("请输入正确的姓名"))},l=function(e,t,l){/^(?:(?:\+|00)86)?1(?:(?:3[\d])|(?:4[5-7|9])|(?:5[0-3|5-9])|(?:6[5-7])|(?:7[0-8])|(?:8[\d])|(?:9[1|8|9]))\d{8}$/.test(t)||""===t?l():l(new Error("请输入正确的手机号"))};return{listLoading:!1,list:[],showDetail:!1,showEdit:!1,form:{},rules:{status:[{validator:e,trigger:"blur"}],desc:[{required:!0,message:"处理备注不能为空",trigger:"change"}],name:[{validator:t,trigger:"change"}],phone:[{validator:l,trigger:"change"}]},searchForm:{name:"",phone:""}}},computed:{dialogFlag:{get:function(){return this.showDetail||this.showEdit},set:function(e){this.showDetail=this.showEdit=!!e}}},mounted:function(){this.queryList()},methods:{queryList:function(e){var t=this;this.listLoading=!0,n(e).then((function(e){t.list=e.data,t.listLoading=!1}))},goSearch:function(){var e=this;console.log(1),this.$refs.form.validate((function(t){t&&e.queryList(e.searchForm)}))},onCancel:function(){this.$message({message:"cancel!",type:"warning"})},handleDetail:function(e,t){this.showDetail=!0,this.form=this.list[e],console.log(this.form)},handleEdit:function(e,t){this.showEdit=!0,this.form=this.list[e],console.log(this.form)},changeApply:function(){var e=this;this.showEdit?this.$refs.ruleForm.validate((function(t){if(t){var l=Object.assign(e.form,{id:e.form._id});s(l).then((function(t){e.$alert("处理报名表成功!").then((function(){e.dialogFlag=!1,e.queryList(e.searchForm)}))}))}})):this.showEdit=!1}}},c=i,u=(l("3479"),l("2877")),m=Object(u["a"])(c,a,o,!1,null,"a15a594a",null);t["default"]=m.exports}}]);